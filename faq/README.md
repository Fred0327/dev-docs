
## What is Market Maker Signature Service? Why is it important? 

1. The zkLink Layer2 to which ZKEX is connected, has requirements and restrictions on slot (parallel channel) & nonce for pending transactions generated by a specific single account, i.e. slot must not exceed 16 and nonce must be incremental.

2. Placing an order requires a layer2 transcation signature, slot and nonce are also included in the signature.

3. Placing an order will occupy a certain slot, i.e., for normal users, the maximum is 16 pending orders at the same time. After a successful matching, if an order is fully filled, the slot will be released; if it is partially filled, the order will continue to occupy the original slot until it is fully filled.

4. Such a pending order size may not meet the requirements of market makers, so ZKEX has designed a pending order model specifically for market makers, which is the market maker signature service model.

5. Market makers can place dozens or even hundreds of orders just like a traditional CEX model. After a successful matching by the ZKEX matching engine, ZKEX builds an order which can be completely filled (`will not be partially filled to occupy the slot`) of the order on Layer2. And then it is signed by the market maker, sent to Layer2, and this signature action will need to be completed by a resident service market maker signature service.

## How do I use the Market Maker Signature Service?

### 1. Get the code from [Market Maker Signature Service Repository](https://github.com/ZKEX/market-maker-signer-service)

### 2. Compile

Refer to [README](https://github.com/ZKEX/market-maker-signer-service/blob/master/README.md) to compile and generate the executable `market-maker-signer-service` 

### 3. Deployment

- Get [market maker tools](https://github.com/ZKEX/zkex-mm-tools)

  - Register zkex account
  - Active layer2 account
  - Get testnet token from faucet

**Please ensure the private key of the wallet address is securely backed up, to avoid the potential loss of access to your assets in your wallet.**

- Submit an application to the ZKEX team to obtain your market maker  ‘api-key’ and ‘api-secret’.

### 4. How to configure the `conf.json` file

Referring to [README](https://github.com/ZKEX/market-maker-signer-service/blob/master/README.md), use the executable ‘market-maker-signer-service’ with the argument - ‘encrypt’, which encrypts the `account address private key` and `api-secret` respectively (`must use the same password`)

- The encrypted result is the value of the `encryptedEthPrivKey` field in `conf.json'
```
$ ./market-maker-signer-service -encrypt “account private key”    # Return(Enter)
Enter Security Password: # Enter password and Return (Enter)
```

- The encrypted result is the value of the `encryptedApiSecret` field in `conf.json`
```
$ ./market-maker-signer-service -encrypt api-secret    # Return(Enter)
Enter Security Password: # Enter password and Return (Enter)
```

- The `apiKey` in conf.json is configured as the `api-key` provided by ZKEX     

- The `platformId` in conf.json is configured as `1`
- Start Service
```
$ ./market-maker-signer-service    # Return(Enter)
Enter Security Password:        # Enter password and Return(Enter)
```
- After the service starts, provide the 'Market Maker Signature Service URL' to the ZKEX team

## FAQ

### 1. How can I better secure my assets and how can I do extended development on my market maker signature service?
- You can configure https certificate and use `encrypted channel`.
- You can deserialize the signature content of ZKEX requests and add `verification` according to your needs.

### 2. Why does the Order Size requested by ZKEX to the signature service and the Size in my previous pending order not match?
- The order signed by the market maker is not the complete order previously listed by the market maker, but the part of the pending order that completes the matching.

### 3. What checkpoints can market makers add in extended development?
- Check the size of the Order requested by ZKEX to the signature service, which must not exceed the size of the original pending order of the market maker.
- The sum of the Size of the Orders requested by ZKEX from the signature service must not exceed the size of the Market Maker's original Placing Order.

### 4. Why are some of my orders are not successfully cancelled when I perform a batch order cancellation? 
- Some orders have been matched successfully or partially matched successfully, but some of the resulting orders are still in the state of `not sent to layer2`, or in the state of `transaction not yet confirmed by layer2`. We can't predict whether the transaction will be confirmed as successful or unsuccessful in layer2, so we can assume that the order is not fully settled, so these orders can't be successfully cancelled.

### 5. Why an order that failed to be cancelled successfully last time may be able to be cancelled successfully again after a while?
- After all the orders have been confirmed by Layer2, if there are still unmatched parts of the order, they can be completely cancelled. That is why it is possible that an order that was not cancelled successfully before can be cancelled again after a while by doing one more cancellation operation.

### 6. Is there any tools for me(a market maker user) to register zkex account and active zklink layer2 account?
- Fortinately, Yes! Referring to [README](https://github.com/ZKEX/zkex-mm-tools/blob/master/README.md), you can `get started` with it now.

